:root{
  --bg:#000;
  --fg:#fff;
  --muted:rgba(255,255,255,0.70);
  --line:rgba(255,255,255,0.20);
  --card:rgba(255,255,255,0.06);
  --card2:rgba(255,255,255,0.04);
  --tick:rgba(255,255,255,0.35);
  --tickStrong:rgba(255,255,255,0.65);
}

*{ box-sizing:border-box; }

html, body{ height:100%; }

body{
  margin:0;
  background:var(--bg);
  color:var(--fg);
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
}

/* ===== Layout wrapper ===== */
.wrap{
  height:100%;
  width:100%;
  display:flex;
  align-items:stretch;
  justify-content:space-between;
  gap:14px;

  /* Safe-area padding (iOS Home Screen web app) */
  padding:14px;
  padding-top:    calc(14px + constant(safe-area-inset-top));
  padding-right:  calc(14px + constant(safe-area-inset-right));
  padding-bottom: calc(14px + constant(safe-area-inset-bottom));
  padding-left:   calc(14px + constant(safe-area-inset-left));

  padding-top:    calc(14px + env(safe-area-inset-top));
  padding-right:  calc(14px + env(safe-area-inset-right));
  padding-bottom: calc(14px + env(safe-area-inset-bottom));
  padding-left:   calc(14px + env(safe-area-inset-left));

  overflow:hidden;
}

/* Cards */
.clockCard,
.calCard{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:16px;
  padding:14px;
  min-width:0;            /* critical for flex shrink on iOS */
}

/* Left: clock */
.clockCard{
  flex:0 0 46%;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  gap:12px;
}

/* Right: calendar */
.calCard{
  flex:1 1 auto;
  display:flex;
  flex-direction:column;
  min-width:0;            /* critical for grid not overflowing */
}

/* Extra left shift so the calendar does not feel cropped in landscape */
@media (orientation: landscape){
  .calCard{
    transform: translateX(-10px);
  }
}

/* ===== Clock face ===== */
.clock{
  position:relative;

  width:min(56vh, 46vw);
  max-width:100%;
  aspect-ratio:1 / 1;

  border-radius:50%;
  border:2px solid var(--line);
  margin:0 auto;

  background:
    radial-gradient(circle at center, rgba(255,255,255,0.12), transparent 58%),
    radial-gradient(circle at center, rgba(255,255,255,0.06), transparent 72%);
  box-shadow:0 0 0 1px rgba(255,255,255,0.06) inset;
}

/* Tick layer */
.ticks{
  position:absolute;
  inset:0;
  border-radius:50%;
}

.tick{
  position:absolute;
  left:50%;
  top:50%;
  width:2px;
  height:10%;
  background:var(--tick);
  transform-origin:50% calc(100% - 2px);
  border-radius:999px;
}

.tick.hour{
  width:3px;
  height:12%;
  background:var(--tickStrong);
}

/* Numbers layer */
.numbers{
  position:absolute;
  inset:0;
  border-radius:50%;
}

.num{
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%, -50%);
  font-size:clamp(14px, 2.2vmin, 20px);
  color:rgba(255,255,255,0.88);
  text-shadow:0 1px 0 rgba(0,0,0,0.5);
  user-select:none;
}

/* Hands */
.hand{
  position:absolute;
  left:50%;
  top:50%;
  transform-origin:0% 50%;
  transform:translateY(-50%) rotate(0deg);
  border-radius:999px;
  background:var(--fg);
  box-shadow:0 0 0 1px rgba(0,0,0,0.15);
}

.hand.hour{   width:28%; height:7px; opacity:0.95; }
.hand.minute{ width:41%; height:5px; opacity:0.92; }
.hand.second{ width:44%; height:2px; opacity:0.85; }

.centerDot{
  position:absolute;
  width:12px;
  height:12px;
  background:var(--fg);
  border-radius:50%;
  left:50%;
  top:50%;
  transform:translate(-50%, -50%);
  box-shadow:0 0 0 3px rgba(255,255,255,0.10);
}

.clockMeta{ text-align:center; }
.dateLine{ font-size:18px; color:var(--muted); }

/* ===== Calendar ===== */
.calHeader{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  margin-bottom:10px;
}

.calTitle{
  font-size:18px;
  color:var(--fg);
  text-align:center;
  flex:1;
}

.calNav{
  width:44px;
  height:38px;
  border-radius:12px;
  border:1px solid var(--line);
  background:var(--card2);
  color:var(--fg);
  font-size:16px;
}

/* DOW row and grid */
.dowRow,
.grid{
  display:grid;
  grid-template-columns:repeat(7, 1fr);
  gap:6px;
}

.dowRow{
  font-size:13px;
  color:var(--muted);
  padding:4px 2px 10px 2px;
}

.grid{
  flex:1;
  align-content:start;
  min-width:0;
}

/* Day cells */
.cell{
  border:1px solid var(--line);
  background:rgba(255,255,255,0.04);
  border-radius:10px;
  min-height:44px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:16px;
}

.cell.out{ opacity:0.35; }
.cell.today{ outline:2px solid rgba(255,255,255,0.75); }

/* ===== Portrait fallback (so it doesn't look “missing”) ===== */
@media (orientation: portrait){
  .wrap{
    flex-direction:column;
  }
  .clockCard{
    flex:0 0 auto;
  }
  .calCard{
    transform:none;
  }
  .clock{
    width:min(46vh, 90vw);
  }
}
